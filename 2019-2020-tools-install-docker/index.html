<!doctype html><html lang=zh-cn><head><meta charset=utf-8><title>Docker安装指南</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Docker安装指南"><meta name=author content="TaibiaoGuo"><meta name=generator content="Hugo 0.67.1"><link rel=stylesheet href=https://taibiaoguo.github.io/blockchain101/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://taibiaoguo.github.io/blockchain101/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://taibiaoguo.github.io/blockchain101/scss/style.min.css media=screen><link rel="shortcut icon" href=https://taibiaoguo.github.io/blockchain101/images/favicon.png type=image/x-icon><link rel=icon href=https://taibiaoguo.github.io/blockchain101/images/favicon.png type=image/x-icon><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','\tGTM-M88J7C2');</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div class=preloader><img src=/blockchain101/images/logo.svg alt=preloader></div><header class="fixed-top navigation"><div class=container><nav class="navbar navbar-expand-lg navbar-light bg-transparent"><a class=navbar-brand href=https://taibiaoguo.github.io/blockchain101/><img class=img-fluid src=/blockchain101/images/logo.svg alt="区块链技术及应用发展 | Blockchain 101"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class="ti-menu h3"></i></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://taibiaoguo.github.io/blockchain101/>Home</a></li></ul><div class=search><button id=searchOpen class=search-btn><i class=ti-search></i></button><div class=search-wrapper><form action=https://taibiaoguo.github.io/blockchain101//search class=h-100><input class="search-box px-4" id=search-query name=s type=search placeholder="Type & Hit Enter..."></form><button id=searchClose class=search-close><i class="ti-close text-dark"></i></button></div></div></div></nav></div></header><div class="py-5 d-none d-lg-block"></div><section class=section><div class=container><div class=row><div class="col-lg-8 mx-auto block shadow mb-5"><h2>Docker安装指南</h2><div class="mb-3 post-meta"><a href=/blockchain101/author/></a>,
17/20/2020,
<a href=/blockchain101/categories/docker>Docker</a></div><div class="content mb-5"><p>本指南用于在阿里云服务器上安装Docker</p><blockquote><p>判断是否成功安装docker的方法，在SSH中输入命令
<code>docker run --rm registry.cn-shenzhen.aliyuncs.com/blockchain101 hello_blockchain</code> 并按<code>回车</code>或<code>return</code>执行命令，如果出现<code>blockchain 101</code>的字符画（手机显示可能会错位），则表示docker安装成功。</p><p>若未成功，则根据你使用的设备，按照 <code>一、PC端安装步骤总览</code> 或 <code>二、手机端安装步骤总览</code> 中任意一个来完成docker的安装。</p></blockquote><h3 id=一pc端安装步骤总览>一、PC端安装步骤总览</h3><blockquote><p>手机端和网页端访问的是同一台服务器，两种安装方式只需要按照流程执行一种即可。</p></blockquote><h4 id=1安装前检查清单>1、安装前检查清单</h4><p>已经兑换了阿里云服务器</p><h4 id=2重装阿里云服务器操作系统>2、重装阿里云服务器操作系统</h4><blockquote><p>为了避免不必要的错误，因此这里直接让大家重装阿里云的操作系统</p></blockquote><p><strong>2.1 登陆阿里云官网</strong></p><p>访问阿里云官方网站 <a href=https://www.aliyun.com/>https://www.aliyun.com/</a> 并登陆阿里云官网</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-1-1.png width=100%></figure><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-1-2.png width=100%></figure><p><strong>2.2 进入阿里云控制面板</strong></p><p>点击<code>控制台</code>进入控制台页面</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-2-1.png width=100%></figure><p>在控制台页面的<code>已开通的云产品</code>中找到<code>云服务器ECS</code>，点击进入云服务器页面</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-2-2.png width=100%></figure><p>在云服务器页面中找到<code>实例ID</code>列表,点击你的实例的ID进入云服务器的实例详情页</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-2-3.png width=100%></figure><p><strong>2.3 停止实例</strong>
在实例详情页面中找到<code>停止</code>按钮，点击</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-3-1.png width=100%></figure><p>在弹出的选择框中分别选择<code>强制停止</code>、<code>确定要强制停止</code>、<code>确定</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-3-2.png width=100%></figure><p>等待实例停止</p><p><strong>2.4 更换操作系统</strong></p><p>实例停止后，找到实例详情页面中的<code>配置信息</code>，点击，在下拉列表中点击<code>更换操作系统</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-4-1.png width=100%></figure><p>在弹框中选择 <code>确定，更换操作系统</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-4-2.png width=100%></figure><p>在新的页面中在<code>公共镜像</code>下拉菜单中选择<code>Ubuntu</code>和<code>18.04 64位</code></p><p>在<code>安全设置</code>中选择<code>自定义密码</code></p><p>在<code>登陆密码</code>设置一个服务器密码</p><p>点击<code>确认</code></p><p>在弹出框中获取<code>手机验证码</code>、输入得到的手机验证码、<code>确认</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-4-3.png width=100%></figure><p>在弹出的框中选择<code>返回实例列表</code>并等待服务器启动完成</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/2-4-5.png width=100%></figure><h4 id=3通过网页版ssh连接服务器>3、通过网页版SSH连接服务器</h4><p>在服务器自动启动完成后，在<code>实例列表</code>中选择你的服务器的<code>远程连接</code></p><p><strong>3.1 远程连接服务器</strong></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/3-1-1.png width=100%></figure><p>确定<code>连接协议</code>是<code>SSH</code></p><p>在<code>用户名</code>处输入<code>root</code></p><p>在<code>密码</code>处输入你在步骤<code>2.4</code>设置的密码</p><p>点击 <code>确定</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/3-1-2.png width=100%></figure><h4 id=4执行安装docker命令>4、执行安装docker命令</h4><p><strong>4.1 执行安装docker命令</strong></p><p>粘贴下面的命令到SSH中，按回车键执行</p><blockquote><p>网页版中可以使用组合键 <code>ctrl</code>+<code>v</code>进行粘贴</p></blockquote><pre><code>curl -sSL https://get.daocloud.io/docker -o d.sh &amp;&amp; chmod +x d.sh &amp;&amp; ./d.sh --mirror Aliyun &amp;&amp; rm d.sh
</code></pre><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/4-1-1.png width=100%></figure><p><strong>4.2 等待命令执行完毕</strong></p><p>命令执行时间大约为2-5分钟，当出现如图所示的标志时表示命令执行结束了</p><blockquote><p>如果命令长时间不结束，则可能是你的安装命令输入错误了，按组合键<code>ctrl</code>+<code>c</code>终止命令的执行</p></blockquote><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/4-1-2.png width=100%></figure><h4 id=5检查docker是否安装成功>5、检查Docker是否安装成功</h4><p><strong>5.1 执行测试命令</strong></p><p>粘贴下面的命令到SSH中，按回车键执行</p><blockquote><p>网页版中可以使用组合键 <code>ctrl</code>+<code>v</code>进行粘贴</p></blockquote><pre><code>docker run --rm registry.cn-shenzhen.aliyuncs.com/blockchain101/hello_blockchain
</code></pre><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/4-2-1.png width=100%></figure><p><strong>5.2 通过运行结果判断是否成功</strong></p><p>运行成功时，会出现blockchain 101 的字符画，否则表示安装失败</p><p>若安装失败，关闭所有网页，重新打开，从步骤<code>1.1</code>重新走整个流程</p><p>若多次安装失败，请联系老师。</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/4-2-2.png width=100%></figure><h4 id=6关闭网页>6、关闭网页</h4><p><code>5.2</code>成功后，即可关闭网页离开。</p><blockquote><p>docker安装完成后无需在每次访问服务器时执行 <code>4.1 docker安装</code>，只需要安装一次，除非docker损坏（可通过<code>5.1</code>进行判断）。</p><p>手机端和网页端访问的是同一台服务器，两种安装方式只需要按照流程执行一种即可。</p></blockquote><h3 id=二手机端安装步骤总览>二、手机端安装步骤总览</h3><blockquote><p>手机端和网页端访问的是同一台服务器，两种安装方式只需要按照流程执行一种即可。</p></blockquote><h4 id=1安装前检查清单-1>1、安装前检查清单</h4><ul><li>已经兑换了阿里云服务器</li><li>手机下载了阿里云APP</li><li>手机下载了支付宝APP</li><li>使用手机自带的浏览器打开本页面（不要使用QQ内置浏览器等打开本页面，因为QQ屏蔽了支付宝）</li></ul><h4 id=2访问阿里云官网和登陆>2、访问阿里云官网和登陆</h4><p><strong>2.1 访问阿里云官网</strong>
粘贴下面的网址到手机浏览器地址栏访问阿里云ECS服务器控制台，进行阿里云的登陆界面</p><pre><code>https://ecs.console.aliyun.com/#/home
</code></pre><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3723.png width=100%></figure><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3724.png width=100%></figure><p><strong>2.2 使用支付宝登陆阿里云</strong></p><p>在支付宝中<code>确认登陆</code>后，支付宝会跳转到<code>云服务器管理控制台</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3725.png width=100%></figure><h4 id=3重装阿里云服务器操作系统>3、重装阿里云服务器操作系统</h4><p>在支付宝跳转的<code>云服务器管理控制台</code>中执行<code>一、PC端安装步骤总览</code>的步骤<code>2.3 停止实例</code> 和 <code>2.4 更换操作系统</code></p><p>执行完后就可以关闭支付宝了</p><h4 id=4访问服务器>4、访问服务器</h4><p><strong>4.1 打开阿里云APP</strong></p><p>打开阿里云APP，切换到<code>产品控制台</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3726.png width=100%></figure><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3727.png width=100%></figure><p><strong>4.2 删除之前的SSH连接</strong>
将之前的SSH配置删除，如果没有请直接跳到步骤<code>4.4</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3734.png width=100%></figure><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3735.png width=100%></figure><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3736.png width=100%></figure><p><strong>4.3 打开SSH工具</strong>
依次点击右上方<code>+</code>、<code>从我的ECS中选择</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3728.png width=100%></figure><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3728.png width=100%></figure><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3729.png width=100%></figure><p>根据你主机所在的地域在地域列表里寻找一下主机（比如截图中在深圳）</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3730.png width=100%></figure><p>找到后，<code>选中主机</code>并点击<code>确定</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3731.png width=100%></figure><p><strong>4.4 添加主机并连接</strong></p><p>在<code>登陆名</code>处输入<code>root</code>,在<code>密码</code>处输入之前步骤设置的密码，点击<code>确认连接</code></p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3731.png width=100%></figure><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3733.png width=100%></figure><h4 id=5执行安装命令>5、执行安装命令</h4><p><strong>5.1 执行安装命令</strong></p><p>连上服务器后，复制下面的命令，<code>粘贴</code>到SSH中，按<code>换行</code>键或<code>return</code>键执行</p><pre><code>curl -sSL https://get.daocloud.io/docker -o d.sh &amp;&amp; chmod +x d.sh &amp;&amp; ./d.sh --mirror Aliyun &amp;&amp; rm d.sh
</code></pre><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3737.png width=100%></figure><p>执行完成后，重新出现类似<code>root@sdhkshdfksh:~#</code>的输出，表示可以继续执行下一行命令</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3737.png width=100%></figure><p><strong>5.2 等待命令执行完毕</strong></p><p>命令执行时间大约为2-5分钟，当出现如图所示的标志时表示命令执行结束了</p><blockquote><p>如果命令长时间（5分钟以上）不结束，则可能是你的安装命令输入错误了，按组合键<code>ctrl</code>+<code>c</code>终止命令的执行（先按<code>ctrl</code>,然后按<code>c</code>即可）</p></blockquote><h4 id=6执行测试命令>6、执行测试命令</h4><p><strong>6.1 执行命令</strong>
复制下面的命令，<code>粘贴</code>到SSH中，按<code>换行</code>键或<code>return</code>键执行，时间大概5-10s</p><pre><code>docker run --rm registry.cn-shenzhen.aliyuncs.com/blockchain101/hello_blockchain
</code></pre><p><strong>6.2 执行成功的截图</strong>
如果执行成功，显示blockchain101（手机端因为屏幕过窄因此可能显示得很乱）</p><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3739.png width=100%></figure><figure><img src=/blockchain101/images/post/2019-2020-tools-install-docker/IMG_3740.png width=100%></figure><h4 id=7退出阿里云app>7、退出阿里云APP</h4><p>成功后，直接退出阿里云APP即可。</p><h3 id=三可选不执行不影响本课程学习>三、可选（不执行不影响本课程学习）</h3><p>因为众所周知的网络原因，我在从 hub.docker.com 中拉取镜像时常会因为网络故障出现失败，这时我们需要为docker添加仓库镜像，分别复制以下命令到终端并按回车执行：</p><pre><code>sudo mkdir -p /etc/docker
</code></pre><pre><code>sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'
{
  &quot;registry-mirrors&quot;: [
    &quot;https://dockerhub.azk8s.cn&quot;,
    &quot;https://hub-mirror.c.163.com&quot;
  ]
}
EOF
</code></pre><pre><code>sudo systemctl daemon-reload
</code></pre><pre><code>sudo systemctl restart docker
</code></pre><hr><p>本作品采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可。</p></div></div></div></div></section><footer class="py-4 bg-light border-top"><div class=container><div class="row justify-content-between align-items-center"><div class="col-lg-4 text-center text-lg-left mb-4 mb-lg-0"><a href=https://taibiaoguo.github.io/blockchain101/ class="d-block pb-3"><img src=/blockchain101/images/logo.svg class=img-fluid alt="区块链技术及应用发展 | Blockchain 101"></a></div><div class="col-lg-4 text-center mb-4 mb-lg-0"><ul class="list-inline mb-0"></ul></div><div class="col-lg-4 text-lg-right text-center mb-4 mb-lg-0"><ul class="list-inline social-icon mb-0"><li class=list-inline-item><a href=https://github.com/taibiaoguo/blockchain101><i class=ti-github></i></a></li></ul></div></div><div class="text-center mt-4"><span>© 2020 <a href=https://github.com/TaibiaoGuo>TaibiaoGuo</a> All Rights Reserved</span></div></div></footer><script>var indexURL="https://taibiaoguo.github.io/blockchain101/index.json"</script><script src=https://taibiaoguo.github.io/blockchain101/plugins/jQuery/jquery.min.js></script><script src=https://taibiaoguo.github.io/blockchain101/plugins/bootstrap/bootstrap.min.js></script><script src=https://taibiaoguo.github.io/blockchain101/plugins/search/fuse.min.js></script><script src=https://taibiaoguo.github.io/blockchain101/plugins/search/mark.js></script><script src=https://taibiaoguo.github.io/blockchain101/plugins/search/search.js></script><script src=https://taibiaoguo.github.io/blockchain101/js/script.min.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-158584793-2','auto');ga('send','pageview');</script></body></html>